enum ContributorType {
  INDIVIDUAL
  CONFERENCE
}

enum ContributorContent {
  SERMONS
  HYMNS
  BOOKS
}

model Contributor {
  id   String @id @default(nanoid(16))
  originalId String?

  slug String @unique @db.Citext
  fullName String @unique @db.Citext

  bio String?
  imageUrl String?
  type ContributorType @default(INDIVIDUAL)
  featured FeaturedContributor[]

  images ContributorImage[]
  sermons Sermon[]
  hymns Hymn[]
  books PublishedBook[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model ContributorImage {
  id Int @default(autoincrement()) @id
  originalId Int?

  contributor Contributor @relation(fields: [contributorId], references: [id], onDelete: Cascade)
  contributorId String

  url String @db.Citext

  title String?
  description String?

  takenAt DateTime?
  createdAt DateTime @default(now())

  @@index([contributorId])
}

model FeaturedContributor {
  id Int @default(autoincrement()) @id

  contributor Contributor @relation(fields: [contributorId], references: [id], onDelete: Cascade)
  contributorId String

  content ContributorContent

  createdAt DateTime @default(now())

  @@unique([contributorId, content])
}
